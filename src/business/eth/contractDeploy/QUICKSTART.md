# æ™ºèƒ½åˆçº¦éƒ¨ç½²ç®¡ç†ç³»ç»Ÿ - å¿«é€Ÿå…¥é—¨

## 5åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šæ•°æ®åº“è®¾ç½®

1. åœ¨MySQLä¸­æ‰§è¡Œ `src/services/eth/contract.sql` æ–‡ä»¶
2. ç¡®ä¿å·²åˆ›å»ºä»¥ä¸‹è¡¨ï¼š
   - `eth_contract` - åˆçº¦ä¸»è¡¨
   - `eth_contract_deploy_history` - éƒ¨ç½²å†å²ï¼ˆå¯é€‰ï¼‰
   - `eth_contract_interact_history` - äº¤äº’å†å²ï¼ˆå¯é€‰ï¼‰

```bash
mysql -u your_username -p your_database < src/services/eth/contract.sql
```

### ç¬¬äºŒæ­¥ï¼šé…ç½®åç«¯API

1. ç¡®ä¿ `pages/api/eth/contract/index.ts` å·²å­˜åœ¨
2. ç¡®ä¿ `pages/api/eth/contract/compile.ts` å·²å­˜åœ¨
3. æµ‹è¯•APIæ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

```bash
# æµ‹è¯•åˆçº¦åˆ—è¡¨API
curl http://localhost:3000/api/eth/contract?page=1&limit=10
```

### ç¬¬ä¸‰æ­¥ï¼šå‡†å¤‡éƒ¨ç½²è´¦æˆ·

1. è®¿é—® ETHè´¦æˆ·ç®¡ç†ç•Œé¢
2. åˆ›å»ºæˆ–å¯¼å…¥è‡³å°‘ä¸€ä¸ªè´¦æˆ·
3. ç¡®ä¿è´¦æˆ·æœ‰ç§é’¥ï¼ˆéƒ¨ç½²åˆçº¦éœ€è¦ï¼‰
4. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ETHä½™é¢ï¼ˆæ”¯ä»˜Gasè´¹ç”¨ï¼‰

**æµ‹è¯•ç½‘æ¨è**ï¼š
- Sepolia Testnet: ä» https://sepoliafaucet.com/ è·å–æµ‹è¯•ETH
- Goerli Testnet: ä» https://goerlifaucet.com/ è·å–æµ‹è¯•ETH

### ç¬¬å››æ­¥ï¼šéƒ¨ç½²ä½ çš„ç¬¬ä¸€ä¸ªåˆçº¦

#### æ–¹å¼Aï¼šä½¿ç”¨ç¤ºä¾‹åˆçº¦ï¼ˆæ¨èæ–°æ‰‹ï¼‰

1. æ‰“å¼€ `src/business/eth/contractDeploy/SimpleStorage.sol`
2. è®¿é—® https://remix.ethereum.org
3. åˆ›å»ºæ–°æ–‡ä»¶å¹¶ç²˜è´´ä»£ç 
4. ç¼–è¯‘å™¨è®¾ç½®ï¼š
   - Compiler: 0.8.0æˆ–æ›´é«˜
   - EVM Version: parisï¼ˆæˆ–é»˜è®¤ï¼‰
   - Optimization: 200 runs
5. ç‚¹å‡» "Compile SimpleStorage.sol"
6. åœ¨ "Compilation Details" ä¸­ï¼š
   - å¤åˆ¶ ABI
   - å¤åˆ¶ Bytecodeï¼ˆobjectå­—æ®µçš„å€¼ï¼‰

7. å›åˆ°æœ¬ç³»ç»Ÿï¼Œç‚¹å‡»"éƒ¨ç½²åˆçº¦"
8. åˆ‡æ¢åˆ°"æ‰‹åŠ¨è¾“å…¥"æ ‡ç­¾é¡µï¼š
   - åˆçº¦åç§°: `SimpleStorage`
   - ç²˜è´´ ABI
   - ç²˜è´´ Bytecode
   - ç‚¹å‡»"ç¡®è®¤ç¼–è¯‘ä¿¡æ¯"

9. åˆ‡æ¢åˆ°"éƒ¨ç½²é…ç½®"æ ‡ç­¾é¡µï¼š
   - é€‰æ‹©éƒ¨ç½²è´¦æˆ·
   - æ— éœ€æ„é€ å‡½æ•°å‚æ•°
   - æ·»åŠ å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰
   - ç‚¹å‡»"éƒ¨ç½²åˆçº¦"

10. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦15-30ç§’ï¼‰

#### æ–¹å¼Bï¼šä½¿ç”¨Tokenåˆçº¦ï¼ˆéœ€è¦æ„é€ å‡½æ•°å‚æ•°ï¼‰

1. æ‰“å¼€ `src/business/eth/contractDeploy/Token.sol`
2. åœ¨Remixä¸­ç¼–è¯‘
3. å‡†å¤‡æ„é€ å‡½æ•°å‚æ•°ï¼š
   - `_name`: "My Token"
   - `_symbol`: "MTK"
   - `_decimals`: 18
   - `_initialSupply`: 1000000

4. æŒ‰ç…§æ–¹å¼Açš„æ­¥éª¤8-10è¿›è¡Œéƒ¨ç½²

### ç¬¬äº”æ­¥ï¼šä¸åˆçº¦äº¤äº’

#### è°ƒç”¨åªè¯»æ–¹æ³•ï¼ˆView/Pureï¼‰

1. åœ¨åˆçº¦åˆ—è¡¨ä¸­æ‰¾åˆ°åˆšéƒ¨ç½²çš„åˆçº¦
2. ç‚¹å‡»"äº¤äº’"æŒ‰é’®
3. é€‰æ‹©æ–¹æ³•ï¼Œä¾‹å¦‚ `get()`
4. æ— éœ€é€‰æ‹©è´¦æˆ·ï¼ˆåªè¯»æ–¹æ³•ä¸éœ€è¦Gasï¼‰
5. ç‚¹å‡»"è°ƒç”¨"æŸ¥çœ‹ç»“æœ

#### è°ƒç”¨å†™å…¥æ–¹æ³•ï¼ˆTransactionï¼‰

1. ç‚¹å‡»åˆçº¦çš„"äº¤äº’"æŒ‰é’®
2. é€‰æ‹©æ–¹æ³•ï¼Œä¾‹å¦‚ `set(uint256)`
3. è¾“å…¥å‚æ•°ï¼Œä¾‹å¦‚ `123`
4. é€‰æ‹©äº¤æ˜“è´¦æˆ·ï¼ˆéœ€è¦æœ‰ç§é’¥å’Œä½™é¢ï¼‰
5. ç‚¹å‡»"è°ƒç”¨"
6. ç­‰å¾…äº¤æ˜“ç¡®è®¤ï¼ˆçº¦15-30ç§’ï¼‰
7. æŸ¥çœ‹äº¤æ˜“å“ˆå¸Œ

### ç¬¬å…­æ­¥ï¼šæŸ¥çœ‹åˆçº¦è¯¦æƒ…

1. ç‚¹å‡»åˆçº¦çš„"è¯¦æƒ…"æŒ‰é’®
2. æŸ¥çœ‹ï¼š
   - **åŸºæœ¬ä¿¡æ¯**ï¼šåœ°å€ã€éƒ¨ç½²è€…ã€ç½‘ç»œç­‰
   - **æ–¹æ³•åˆ—è¡¨**ï¼šæ‰€æœ‰å¯è°ƒç”¨çš„æ–¹æ³•
   - **äº‹ä»¶åˆ—è¡¨**ï¼šæ‰€æœ‰å®šä¹‰çš„äº‹ä»¶
   - **æºä»£ç **ï¼šåŸå§‹Solidityä»£ç 
   - **ABI**ï¼šå®Œæ•´çš„æ¥å£å®šä¹‰

## å¸¸è§åœºæ™¯

### åœºæ™¯1ï¼šéƒ¨ç½²ERC20ä»£å¸

```solidity
// ä½¿ç”¨ Token.sol ç¤ºä¾‹
// æ„é€ å‡½æ•°å‚æ•°ï¼š
// - _name: "MyToken"
// - _symbol: "MTK"
// - _decimals: 18
// - _initialSupply: 1000000
```

éƒ¨ç½²åå¯ä»¥ï¼š
- æŸ¥çœ‹æ€»ä¾›åº”é‡: `totalSupply()`
- æŸ¥çœ‹ä½™é¢: `balanceOf(address)`
- è½¬è´¦: `transfer(address, uint256)`
- æˆæƒ: `approve(address, uint256)`
- å¢å‘: `mint(address, uint256)` (ä»…owner)

### åœºæ™¯2ï¼šéƒ¨ç½²NFTåˆçº¦

```solidity
// å‡†å¤‡NFTåˆçº¦æºä»£ç 
// ä½¿ç”¨OpenZeppelinçš„ERC721
// åœ¨Remixä¸­å¯¼å…¥å¹¶ç¼–è¯‘
// å¤åˆ¶ABIå’ŒBytecodeåˆ°æœ¬ç³»ç»Ÿ
```

### åœºæ™¯3ï¼šéƒ¨ç½²DeFiåè®®

```solidity
// å¤æ‚åˆçº¦å»ºè®®ï¼š
// 1. å…ˆåœ¨æµ‹è¯•ç½‘éƒ¨ç½²
// 2. å……åˆ†æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
// 3. ä½¿ç”¨ä¸“ä¸šå®¡è®¡å·¥å…·
// 4. å†éƒ¨ç½²åˆ°ä¸»ç½‘
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šç¼–è¯‘å¤±è´¥

**ç—‡çŠ¶**ï¼šç‚¹å‡»"ç¼–è¯‘åˆçº¦"åæ˜¾ç¤ºé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥Solidityè¯­æ³•
2. ä½¿ç”¨RemixéªŒè¯ä»£ç 
3. ä½¿ç”¨"æ‰‹åŠ¨è¾“å…¥"æ–¹å¼

### é—®é¢˜2ï¼šéƒ¨ç½²å¤±è´¥ - Gasä¸è¶³

**ç—‡çŠ¶**ï¼šäº¤æ˜“å¤±è´¥ï¼Œæç¤º "insufficient funds"

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥è´¦æˆ·ä½™é¢: åœ¨ETHè´¦æˆ·ç®¡ç†ä¸­æŸ¥çœ‹
2. è·å–æµ‹è¯•å¸: ä½¿ç”¨æµ‹è¯•ç½‘æ°´é¾™å¤´
3. ä¸»ç½‘éƒ¨ç½²: ç¡®ä¿æœ‰è¶³å¤ŸETH

### é—®é¢˜3ï¼šéƒ¨ç½²å¤±è´¥ - äº¤æ˜“è¶…æ—¶

**ç—‡çŠ¶**ï¼šé•¿æ—¶é—´æ— å“åº”

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ£€æŸ¥RPCèŠ‚ç‚¹çŠ¶æ€
3. å°è¯•æ›´æ¢ç½‘ç»œ
4. å¢åŠ Gas Price

### é—®é¢˜4ï¼šæ— æ³•è°ƒç”¨åˆçº¦æ–¹æ³•

**ç—‡çŠ¶**ï¼šç‚¹å‡»"è°ƒç”¨"åæŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥å‚æ•°ç±»å‹æ˜¯å¦æ­£ç¡®
2. åœ°å€å‚æ•°å¿…é¡»ä»¥0xå¼€å¤´
3. æ•°å€¼å‚æ•°ä¸è¦åŒ…å«é€—å·
4. å¯¹äºäº¤æ˜“æ–¹æ³•ï¼Œç¡®ä¿é€‰æ‹©äº†æœ‰ç§é’¥çš„è´¦æˆ·

### é—®é¢˜5ï¼šåˆçº¦åœ°å€æ— æ³•åœ¨æµè§ˆå™¨éªŒè¯

**ç—‡çŠ¶**ï¼šåœ¨Etherscanç­‰æµè§ˆå™¨ä¸Šæ‰¾ä¸åˆ°åˆçº¦

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç­‰å¾…åŒºå—ç¡®è®¤ï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰
2. ç¡®è®¤éƒ¨ç½²äº¤æ˜“å·²æˆåŠŸ
3. æ£€æŸ¥ç½‘ç»œæ˜¯å¦æ­£ç¡®
4. ä½¿ç”¨äº¤æ˜“å“ˆå¸Œåœ¨æµè§ˆå™¨æŸ¥è¯¢

## æœ€ä½³å®è·µ

### å¼€å‘é˜¶æ®µ
1. âœ… å§‹ç»ˆå…ˆåœ¨æµ‹è¯•ç½‘éƒ¨ç½²
2. âœ… ä¿å­˜å¥½æºä»£ç å’ŒABI
3. âœ… è¯¦ç»†è®°å½•æ„é€ å‡½æ•°å‚æ•°
4. âœ… å……åˆ†æµ‹è¯•æ‰€æœ‰æ–¹æ³•
5. âœ… è®°å½•éƒ¨ç½²çš„åˆçº¦åœ°å€

### å®‰å…¨å»ºè®®
1. ğŸ”’ æ°¸è¿œä¸è¦åˆ†äº«ç§é’¥
2. ğŸ”’ ä¸»ç½‘éƒ¨ç½²å‰è¿›è¡Œä¸“ä¸šå®¡è®¡
3. ğŸ”’ ä½¿ç”¨å¤šç­¾é’±åŒ…ç®¡ç†é‡è¦åˆçº¦
4. ğŸ”’ è®¾ç½®åˆé€‚çš„è®¿é—®æ§åˆ¶
5. ğŸ”’ å®ç°ç´§æ€¥æš‚åœæœºåˆ¶

### æ€§èƒ½ä¼˜åŒ–
1. âš¡ ä¼˜åŒ–åˆçº¦ä»£ç å‡å°‘Gas
2. âš¡ ä½¿ç”¨é€‚å½“çš„æ•°æ®ç±»å‹
3. âš¡ æ‰¹é‡æ“ä½œä»£æ›¿å¤šæ¬¡è°ƒç”¨
4. âš¡ åˆç†ä½¿ç”¨äº‹ä»¶è®°å½•

## è¿›é˜¶åŠŸèƒ½

### ä½¿ç”¨Web3é’±åŒ…
```typescript
// æœªæ¥åŠŸèƒ½ï¼šé›†æˆMetaMask
// ç”¨æˆ·å¯ä»¥ä½¿ç”¨æµè§ˆå™¨é’±åŒ…éƒ¨ç½²åˆçº¦
```

### åˆçº¦éªŒè¯
```bash
# åœ¨Etherscanä¸ŠéªŒè¯åˆçº¦
# 1. è®¿é—®åˆçº¦åœ°å€é¡µé¢
# 2. ç‚¹å‡» "Verify and Publish"
# 3. é€‰æ‹©ç¼–è¯‘å™¨ç‰ˆæœ¬
# 4. ç²˜è´´æºä»£ç 
# 5. è¾“å…¥æ„é€ å‡½æ•°å‚æ•°ï¼ˆABIç¼–ç ï¼‰
```

### åˆçº¦å‡çº§
```solidity
// ä½¿ç”¨ä»£ç†æ¨¡å¼å®ç°åˆçº¦å‡çº§
// - é€æ˜ä»£ç†
// - UUPSä»£ç†
// - Beaconä»£ç†
```

## å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- Solidity: https://docs.soliditylang.org/
- Ethers.js: https://docs.ethers.org/
- OpenZeppelin: https://docs.openzeppelin.com/

### åœ¨çº¿å·¥å…·
- Remix IDE: https://remix.ethereum.org
- Hardhat: https://hardhat.org
- Truffle: https://trufflesuite.com

### åŒºå—é“¾æµè§ˆå™¨
- Etherscan (Mainnet): https://etherscan.io
- Sepolia: https://sepolia.etherscan.io
- Goerli: https://goerli.etherscan.io

### æµ‹è¯•ç½‘æ°´é¾™å¤´
- Sepolia: https://sepoliafaucet.com
- Goerli: https://goerlifaucet.com
- Mumbai (Polygon): https://faucet.polygon.technology

## ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å·²ç»æŒæ¡äº†åŸºç¡€æ“ä½œï¼Œå¯ä»¥ï¼š

1. ğŸ“š å­¦ä¹ æ›´å¤šSolidityè¯­æ³•
2. ğŸ”¨ å¼€å‘è‡ªå·±çš„æ™ºèƒ½åˆçº¦
3. ğŸš€ éƒ¨ç½²åˆ°ä¸»ç½‘
4. ğŸ¤ ä¸DeFiç”Ÿæ€é›†æˆ
5. ğŸ¨ å¼€å‘å‰ç«¯DApp

## è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜ï¼Ÿ
- æŸ¥çœ‹ README.md äº†è§£è¯¦ç»†åŠŸèƒ½
- æŸ¥çœ‹ç¤ºä¾‹åˆçº¦å­¦ä¹ æœ€ä½³å®è·µ
- æŸ¥çœ‹APIæ–‡æ¡£äº†è§£åç«¯æ¥å£
- åœ¨GitHubä¸Šæäº¤Issue

ç¥ä½ éƒ¨ç½²æ„‰å¿«ï¼ğŸ‰

