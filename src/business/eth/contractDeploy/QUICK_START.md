# 合约暂存功能 - 快速开始

## 🎯 核心改进

**现在可以无需编译直接暂存合约源代码！**

## 📝 三种暂存方式

### 1️⃣ 最简单：只暂存源代码

```
打开部署对话框 → 粘贴Solidity代码 → 点击"暂存" → 完成✅
```

**适用场景**：
- 今天写了代码，明天再编译部署
- 先保存代码，等待团队审核
- 备份合约源代码

### 2️⃣ 常规：编译后暂存

```
粘贴代码 → 编译合约 → 点击"暂存" → 完成✅
```

**适用场景**：
- 已经编译好，但还不想部署
- 需要在多个网络上部署同一合约
- 保存编译结果作为备份

### 3️⃣ 手动：输入ABI和Bytecode

```
切换到"手动输入"标签页 → 输入ABI和Bytecode → 点击"暂存" → 完成✅
```

**适用场景**：
- 使用Remix等外部工具编译
- 导入第三方合约
- 已有编译结果，直接导入

## 🚀 从暂存到部署

### 已编译的合约

```
找到未部署的合约 → 点击"部署"按钮 → 选择账户 → 填写参数 → 部署✅
```

### 未编译的合约

```
找到未部署的合约 → 点击"部署"按钮 → 编译合约 → 选择账户 → 填写参数 → 部署✅
```

## ✨ 关键特性

| 功能 | 旧版本 | 新版本 |
|------|--------|--------|
| 暂存前必须编译 | ✅ 是 | ❌ 否 |
| 只保存源代码 | ❌ 不支持 | ✅ 支持 |
| 部分信息暂存 | ❌ 不支持 | ✅ 支持 |
| ABI可为空 | ❌ 不可 | ✅ 可以 |
| Bytecode可为空 | ❌ 不可 | ✅ 可以 |

## 📋 最低要求

暂存时只需要：
- ✅ 合约名称（必填）
- ✅ 至少一项：源代码 或 ABI 或 Bytecode

## 🔧 数据库更新

执行迁移脚本：
```sql
source src/services/eth/contract_migration.sql
```

## 💡 使用示例

### 示例1：工作分阶段

**周一**：
```
写完代码 → 暂存 → 下班
```

**周二**：
```
找到暂存的合约 → 编译 → 测试
```

**周三**：
```
部署到测试网 → 验证
```

**周四**：
```
部署到主网 → 完成
```

### 示例2：团队协作

**开发者**：
```
写代码 → 暂存 → 通知审核
```

**审核者**：
```
查看源代码 → 审核通过
```

**部署者**：
```
编译 → 部署
```

### 示例3：多网络部署

```
编译一次 → 暂存 → 部署到Sepolia → 部署到Goerli → 部署到Mainnet
```

## ⚠️ 注意事项

1. ✅ 未部署的合约可以随时删除（不影响链上数据）
2. ✅ 可以多次暂存同一合约的不同版本
3. ⚠️ 只有已部署的合约才能进行链上交互
4. ⚠️ 未编译的合约需要先编译才能部署

## 🎓 最佳实践

1. **清晰命名**：使用有意义的合约名称，如 `TokenV1`, `TokenV2`
2. **详细备注**：记录合约用途、版本、注意事项
3. **定期清理**：删除不再需要的暂存合约
4. **源码备份**：即使不部署，也可以暂存源代码作为备份

## 🆘 常见问题

**Q: 暂存按钮是灰色的？**  
A: 现在不会了！暂存按钮始终可用（除非正在保存）

**Q: 可以只保存源代码吗？**  
A: 可以！输入代码和名称后直接点暂存

**Q: 部署未编译的合约怎么办？**  
A: 系统会提示你先编译，然后才能部署

**Q: 暂存后可以修改吗？**  
A: 目前需要删除后重新暂存，或者直接创建新版本

---

💡 **提示**：暂存功能让你的工作更灵活，不再需要一次性完成编译和部署！

